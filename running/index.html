<!doctype html>
<!--[if lt IE 7 ]><html itemscope itemtype="http://schema.org/Organization" id="ie6" class="ie ie-old" lang="en-US"><![endif]-->
<!--[if IE 7 ]>   <html itemscope itemtype="http://schema.org/Organization" id="ie7" class="ie ie-old" lang="en-US"><![endif]-->
<!--[if IE 8 ]>   <html itemscope itemtype="http://schema.org/Organization" id="ie8" class="ie ie-old" lang="en-US"><![endif]-->
<!--[if IE 9 ]>   <html itemscope itemtype="http://schema.org/Organization" id="ie9" class="ie" lang="en-US"><![endif]-->
<!--[if gt IE 9]><!--><html itemscope itemtype="http://schema.org/Organization" lang="en-US"><!--<![endif]-->
<head>

    <!-- Meta -->
    <meta charset="utf-8">
    <title>How to Run Your Tests - MarkLogic Unit Test</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
    <meta content="yes" name="apple-mobile-web-app-capable">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

    <!-- Favicons -->
    <link rel="shortcut icon" sizes="16x16 24x24 32x32 48x48 64x64 96x96" href="/marklogic-unit-test/favicon.ico">
    <meta name="application-name" content="MarkLogic Unit Test - A Unit Test framework for MarkLogic">
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-6638631-15', 'auto');
      ga('send', 'pageview');

    </script>

    <!-- Facebook Pixel Code -->
    <script>
    !function(f,b,e,v,n,t,s){if(f.fbq)return;n=f.fbq=function(){n.callMethod?
    n.callMethod.apply(n,arguments):n.queue.push(arguments)};if(!f._fbq)f._fbq=n;
    n.push=n;n.loaded=!0;n.version='2.0';n.queue=[];t=b.createElement(e);t.async=!0;
    t.src=v;s=b.getElementsByTagName(e)[0];s.parentNode.insertBefore(t,s)}(window,
    document,'script','https://connect.facebook.net/en_US/fbevents.js');
    fbq('init', '1879746318909687'); // Insert your pixel ID here.
    fbq('track', 'PageView');
    </script>
    <noscript><img height="1" width="1" style="display:none"
    src="https://www.facebook.com/tr?id=1879746318909687&ev=PageView&noscript=1"
    /></noscript>
    <!-- DO NOT MODIFY -->
    <!-- End Facebook Pixel Code -->
    <link type="text/css" rel="stylesheet" href="/marklogic-unit-test/assets/bundle.css">
</head>
<body class="">

    <nav class="navbar navbar-inverse">
        <div class="container-fluid">
            <div class="navbar-header">
                <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand" href="/marklogic-unit-test">
                  <span class="logo">
                    <img src="/marklogic-unit-test/images/logo-marklogic.svg" width="180px" height="38px" alt="MarkLogic" title="MarkLogic" scale="0">
                  </span>
                  MarkLogic Unit Test
                </a>
            </div>
            <div id="navbar" class="navbar-collapse collapse">
                <ul class="nav navbar-nav navbar-right">
                    
                        <li  >
                            
                            <a href="/marklogic-unit-test/">Getting Started</a>
                            
                        </li>
                    
                        <li  >
                            
                            <a href="https://github.com/marklogic-community/marklogic-unit-test">GitHub</a>
                            
                        </li>
                    
                </ul>
            </div>
        </div>
    </nav>




  <article>
    <div class="container">
      <div class="row">
        <div class="side-nav col-md-3 hide-small">
          <div class="panel panel-default">
  <div class="panel-heading">Navigation</div>
  <ul class="list-group">
  
  <li  class="list-group-item"  >
    
    <a href="/marklogic-unit-test/">Getting Started</a>
    
    
  </li>
  
  <li  class="list-group-item"  >
    
    <a href="/marklogic-unit-test/include/">How to Include MarkLogic Unit Test in Your Project</a>
    
    
  </li>
  
  <li  class="list-group-item active"  >
    
    <a href="/marklogic-unit-test/running/">How to Run Your Tests</a>
    
    
  </li>
  
  <li  class="list-group-item"  >
    
    <a href="/marklogic-unit-test/docs/">Docs</a>
    
    
      <ul class="list-group">
  
  <li  class="list-group-item"  >
    
    <a href="/marklogic-unit-test/docs/conventions/">Filename Conventions</a>
    
    
  </li>
  
  <li  class="list-group-item"  >
    
    <a href="/marklogic-unit-test/docs/loading-data/">Loading Data</a>
    
    
  </li>
  
  <li  class="list-group-item"  >
    
    <a href="/marklogic-unit-test/docs/testing-with-sjs/">Testing With JavaScript</a>
    
    
  </li>
  
  <li  class="list-group-item"  >
    
    <a href="/marklogic-unit-test/docs/testing-with-xquery/">Testing With XQuery</a>
    
    
  </li>
  
  <li  class="list-group-item"  >
    
    <a href="/marklogic-unit-test/docs/assertions/">Assert Functions</a>
    
    
  </li>
  
  <li  class="list-group-item"  >
    
    <a href="/marklogic-unit-test/docs/transactional/">Transactional Unit Tests</a>
    
    
  </li>
  
</ul>

    
  </li>
  
  <li  class="list-group-item"  >
    
    <a href="https://github.com/marklogic-community/marklogic-unit-test">MarkLogic Unit Test on GitHub</a>
    
    
  </li>
  
</ul>

</div>

        </div>
        <div class="col-md-9">
          <h1 id="running-unit-tests">Running Unit Tests</h1>
<p>MarkLogic Unit Test provides a few options about how to run your tests. Before running your tests, you need to load the
configuration you set up (see <a href="../include/">How to Include MarkLogic Unit Test</a>).</p>

<p>First, deploy the application:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>gradle mlDeploy
</code></pre></div></div>

<p>This will deploy the application along with the marklogic-unit-test modules.</p>

<p>The examples below assume that your test application server is on port 8042.</p>

<h2 id="running-from-the-ui">Running from the UI</h2>

<p>You can run the original UI test runner by going to:</p>

<ul>
  <li>http://localhost:8042/test/default.xqy</li>
</ul>

<p>Use the UI to select which test suites and test cases you want to run. You can also disable running the teardown after each suite and after each test.</p>

<h2 id="running-from-gradle">Running from gradle</h2>

<p>Tests can be run from the command line as a gradle task:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>gradle mlUnitTest
</code></pre></div></div>

<p>This runs your tests and gives a report on the results.</p>

<p>You can get usage information by asking gradle:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>gradle help --task=mlunittest
</code></pre></div></div>

<p>At this time, ml-gradle runs all test suites; there is not way to specify running just a set of suites or test cases.</p>

<h2 id="running-from-rest">Running from REST</h2>

<p>You can also access the marklogic-unit-test REST endpoints directly: http://localhost:8042/v1/resources/marklogic-unit-test</p>

<p>The response will look like this:</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;t:tests</span> <span class="na">xmlns:t=</span><span class="s">"http://marklogic.com/test"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;t:suite</span> <span class="na">path=</span><span class="s">"auditing"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;t:tests&gt;</span>
      <span class="nt">&lt;t:test</span> <span class="na">path=</span><span class="s">"document-history.sjs"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;t:test</span> <span class="na">path=</span><span class="s">"history-single-merge.sjs"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;t:test</span> <span class="na">path=</span><span class="s">"normalize-value-for-tracing.xqy"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;t:test</span> <span class="na">path=</span><span class="s">"property-history.xqy"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;t:test</span> <span class="na">path=</span><span class="s">"remerge.sjs"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;/t:tests&gt;</span>
  <span class="nt">&lt;/t:suite&gt;</span>
<span class="nt">&lt;/t:tests:&gt;</span>
</code></pre></div></div>

<p>In most cases, you’ll have more than one suite defined.</p>

<p>With no parameters, this endpoint returns a list of available tests. Add the <code class="highlighter-rouge">rs:func=run</code> parameter and MarkLogic Unit Test
will execute the requested tests. The following parameters control the test run:</p>

<ul>
  <li><code class="highlighter-rouge">rs:suite</code>: the name of a test suite to run. This value comes from the <code class="highlighter-rouge">@path</code> attribute of a <code class="highlighter-rouge">t:suite</code> element. The endpoint expects exactly one suite. To run multiple suites, send multiple requests.</li>
  <li><code class="highlighter-rouge">rs:tests</code>: a comma-separated list of test cases to run. The values come from the <code class="highlighter-rouge">@path</code> attribute of <code class="highlighter-rouge">t:test</code> elements. If this parameter is not provided or is left blank, all tests within the specified suite will be run.</li>
  <li><code class="highlighter-rouge">rs:runsuiteteardown</code>: Defaults to true. If false, skip running the suite-level teardown after the tests.</li>
  <li><code class="highlighter-rouge">rs:runteardown</code>: Defaults to true. If false, skip running the teardown after each test.</li>
  <li><code class="highlighter-rouge">rs:format</code>: The format to use for returning results. Default is “xml”. You can also specify “junit”.</li>
  <li><code class="highlighter-rouge">rs:calculatecoverage</code>: Whether to include code coverage data. Default is “false”. <em>Note that this feature is still experimental.</em></li>
</ul>

<h2 id="running-from-an-ide">Running from an IDE</h2>

<p>This project includes the Gradle Java plugin, which allows you to run tests under src/test/java. This project includes
an example of a JUnit Parameterized test that invokes each marklogic-unit-test module separately - you can try it like this:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>gradle test
</code></pre></div></div>

<p>Again, two tests will run, and one will intentionally fail. The Parameterized test can be run in an IDE as well, allowing
you to take advantage of your IDE’s support for JUnit tests.</p>


        </div>
      </div>
    </div>
  </article>


    <footer class="site-footer">
        <div class="container">
            <div class="row">
                <div class="col-md-12">
                    <p>
                    Copyright © 2016-2023 MarkLogic Corporation. All Rights Reserved. MARKLOGIC® is a registered trademark of MarkLogic Corporation.
                    </p>
                </div>
            </div>
        </div>
    </footer>


    <!--[if lt IE 9]>
        <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.2/html5shiv.min.js"></script>
        <script src="/marklogic-unit-test/js/respond.min.js"></script>
    <![endif]-->

    <script type="text/javascript" src="/marklogic-unit-test/assets/bundle.js" id="1"></script>
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-79716597-1', 'auto');
      ga('send', 'pageview');
    </script>
  </body>
</html>

